language: cpp
before_install:
    - sudo apt-get install cmake
    - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
    - sudo apt-get update -qq

install:
    - sudo apt-get install -qq g++-6
    - sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-6 90

jobs:
    include:
        - stage: gamelib
          name: "Game library"
          script: cd library && mkdir build && cd build && cmake .. && make
        - stage: tester
          name: "Tester"
          script: chmod +x builder.sh && ./builder.sh && ./tester.exe
stages:
    - gamelib
    - tester
